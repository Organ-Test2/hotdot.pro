var slider;$(document).on("ready",function(){slider={$src:$(".slider"),$stack:$(".slider-stack"),step:void 0,cur:{h:0,v:0},size:{h:3,v:3},exactShift:{h:0,v:0},queue:[],length_override:0},slider.step={h:parseInt(slider.$src.width(),10),v:parseInt(slider.$src.height(),10)};var e=["h","v"];slider.shift=function(s){var i="left"==s||"right"==s?"h":"v",r="right"==s||"down"==s?1:-1,t={h:"left",v:"top"};if(slider.cur[i]+r<0||slider.cur[i]+r>=slider.size[i]){slider.$stack.find(".clone").remove();var l=slider.$stack.children(),d=$(l[slider.cur.v*slider.size.h+slider.cur.h]),c=d.clone().addClass("clone"),n={h:0,v:0};for(var a in e){var h=e[a];n[h]=i==h?r>0?-slider.step[h]:slider.size[h]*slider.step[h]:slider.cur[h]*slider.step[h]}var n={left:n.h,top:n.v},o={left:-n.left,top:-n.top};c.appendTo(slider.$stack).css({position:"absolute"}),c.css(n),slider.$stack.css(o),slider.cur[i]-=r*slider.size[i],slider.exactShift[i]=o[t[i]]}var u,f=slider.exactShift[i],v=f-r*slider.step[i];u="h"==i?{left:v}:{top:v},slider.cur[i]+=r,slider.exactShift[i]=v,slider.$stack.animate(u,300,function(){slider.length_override--,slider.advanceQueue()})},slider.advanceQueue=function(){slider.length_override>0&&slider.queue.shift()()},$(".control").on("click",function(e){e.preventDefault();var s=$(this),i=void 0;s.hasClass("left")?i=function(){slider.shift("left")}:s.hasClass("up")?i=function(){slider.shift("up")}:s.hasClass("down")?i=function(){slider.shift("down")}:s.hasClass("right")&&(i=function(){slider.shift("right")}),slider.length_override++,1==slider.length_override?i():slider.queue.push(i)})});