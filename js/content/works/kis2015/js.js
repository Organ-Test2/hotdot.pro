$(function(){function t(){var t=document.createElement("audio");if(t.canPlayType){for(var e=0;e<arguments.length;e++){var i=document.createElement("source");i.setAttribute("src",arguments[e]),arguments[e].match(/\.(\w+)$/i)&&i.setAttribute("type",a[RegExp.$1]),t.appendChild(i)}return t.load(),t.playclip=function(){t.pause(),t.currentTime=0,t.play()},t}return{playclip:function(){throw new Error("Your browser doesn't support HTML5 audio unfortunately")}}}function e(t){if(t.preventDefault(),$(this).hasClass("active"))return!1;c.animate({opacity:0},500),n.off();var a=$([".",$(this).attr("data-stage")].join("")),i=$(this).parent().index();n.removeClass("active"),$(this).addClass("active"),r[i]&&setTimeout(function(){r[i].playclip()},800),a.children().each(function(t){$(this).delay(1e3*t).animate({opacity:1},1e3,function(){t!==a.children().length-1&&$(this).animate({opacity:0},2e3,function(){t===a.children().length-2&&n.on("click",e)})})})}var a,i=$(".js-doc li"),n=$("[data-stage]"),r=[],c=$(".stages-images > ul > li");setInterval(function(){var t=i.filter(".active"),e=t.next();e.length||(e=i.filter(":first-child")),t.removeClass("active"),e.addClass("active")},500),a={mp3:"audio/mpeg",mp4:"audio/mp4",ogg:"audio/ogg",wav:"audio/wav"},n.parent().each(function(){r.push(t($(this).attr("data-sound")))}),n.on("click",e)});